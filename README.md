# Helm Common (STILL IN WORKING PROGRESS)

In order to re-generate README.md (params based on values.yaml commented by [# @param])<br/>
Used: https://github.com/bitnami/readme-generator-for-helm
```
   readme-generator-for-helm -r ../helm-common/README.md -v ../helm-common/values.yaml 

   readme-generator-for-helm -s ../helm-common/schema.json -v ../helm-common/values.yaml
```

In order to re-generate schema.json (based on values.yaml commented by [# @schema]) <br/>
Used: https://github.com/losisin/helm-values-schema-json
```
    helm schema -input values.yaml -output schema.json
```

## Parameters

### shared parameters

These params are shared between different sections.

| Name                        | Description                                                              | Value   |
| --------------------------- | ------------------------------------------------------------------------ | ------- |
| `kubeVersion`               | Kubernetes version                                                       | `""`    |
| `commonLabels`              | Labels to add for all k8s resources                                      | `[]`    |
| `commonAnnotations`         | Annotations to add for all k8s resources                                 | `[]`    |
| `volumePermissions.enabled` | Is initContainers "process" should be included                           | `false` |
| `persistence.enabled`       | Is initContainers "process" should be included also volumes are defined  | `false` |
| `diagnosticMode.enabled`    | Is container command/args should be defined                              | `false` |

### configValues parameters

This description starts in a new line instead of the same line of description start tag. It does not have multiple lines.

| Name                                                          | Description                                                                                                                                                                                                                          | Value                         |
| ------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ | ----------------------------- |
| `configValues.deploymentAnnotations`                          | Annotations for configValues deployment                                                                                                                                                                                              | `{}`                          |
| `configValues.autoscaling.vpa.enabled`                        | Enable VPA for pods (currently should be FALSE, TRUE still not tested)                                                                                                                                                               | `false`                       |
| `configValues.autoscaling.vpa.annotations`                    | Annotations for VPA resource                                                                                                                                                                                                         | `{}`                          |
| `configValues.autoscaling.vpa.controlledResources`            | VPA List of resources that the vertical pod autoscaler can control. Defaults to cpu and memory                                                                                                                                       | `[]`                          |
| `configValues.autoscaling.vpa.maxAllowed`                     | VPA Max allowed resources for the pod                                                                                                                                                                                                | `{}`                          |
| `configValues.autoscaling.vpa.minAllowed`                     | VPA Min allowed resources for the pod                                                                                                                                                                                                | `{}`                          |
| `configValues.autoscaling.vpa.updatePolicy.updateMode`        | Autoscaling update policy                                                                                                                                                                                                            | `Auto`                        |
| `configValues.autoscaling.hpa.enabled`                        | Enable HPA for pods                                                                                                                                                                                                                  | `false`                       |
| `configValues.autoscaling.hpa.minReplicas`                    | Minimum number of replicas                                                                                                                                                                                                           | `""`                          |
| `configValues.autoscaling.hpa.maxReplicas`                    | Maximum number of replicas                                                                                                                                                                                                           | `""`                          |
| `configValues.autoscaling.hpa.targetCPU`                      | Target CPU utilization percentage                                                                                                                                                                                                    | `""`                          |
| `configValues.autoscaling.hpa.targetMemory`                   | Target Memory utilization percentage                                                                                                                                                                                                 | `""`                          |
| `configValues.replicaCount`                                   | Number of replicas to deploy                                                                                                                                                                                                         | `1`                           |
| `configValues.updateStrategy`                                 | Update strategy of deploy. For more details see values.yaml                                                                                                                                                                          | `{}`                          |
| `configValues.podLabels`                                      | Extra labels for pods                                                                                                                                                                                                                | `{}`                          |
| `configValues.podAnnotations.enabled`                         | Enable pod annotations                                                                                                                                                                                                               | `true`                        |
| `configValues.podAnnotations.resetOnConfigChange`             | Relative annnotation for reset onConfig change                                                                                                                                                                                       | `true`                        |
| `configValues.podAnnotations.annotations`                     | Additional pod annotations                                                                                                                                                                                                           | `{}`                          |
| `configValues.prometheus.scrape`                              | Flag to prometheus to scrape service metrics                                                                                                                                                                                         | `true`                        |
| `configValues.prometheus.port`                                | If the metrics are exposed on a different port to the service then set this appropriately                                                                                                                                            | `8000`                        |
| `configValues.prometheus.path`                                | If the metrics path is not `/metrics` override this                                                                                                                                                                                  | `/other-then-metrics`         |
| `configValues.prometheus.scheme`                              | If the metrics endpoint is secured then you will need to set this to `https` & most likely set the `tls_config` of the scrape config                                                                                                 | `http`                        |
| `configValues.prometheus.params`                              | If the metrics endpoint uses query parameters then you can set any parameter                                                                                                                                                         | `[]`                          |
| `configValues.automountServiceAccountToken`                   | Mount Service Account token for pods                                                                                                                                                                                                 | `false`                       |
| `configValues.hostAliases`                                    | Pods host aliases                                                                                                                                                                                                                    | `[]`                          |
| `configValues.affinity`                                       | Affinity for pods assignment                                                                                                                                                                                                         | `{}`                          |
| `configValues.podAffinityPreset`                              | Pod affinity preset. Ignored if `configValues.affinity` is set. Allowed values: `soft` or `hard`                                                                                                                                     | `""`                          |
| `configValues.podAntiAffinityPreset`                          | Pod anti-affinity preset. Ignored if `configValues.affinity` is set. Allowed values: `soft` or `hard`                                                                                                                                | `soft`                        |
| `configValues.nodeAffinityPreset`                             | Node afinity preset                                                                                                                                                                                                                  | `{}`                          |
| `configValues.nodeSelector`                                   | Node labels for pods assignment                                                                                                                                                                                                      | `{}`                          |
| `configValues.tolerations`                                    | Tolerations for pods assignment                                                                                                                                                                                                      | `[]`                          |
| `configValues.priorityClassName`                              | pods' priorityClassName                                                                                                                                                                                                              | `""`                          |
| `configValues.schedulerName`                                  | Name of the k8s scheduler (other than default) for pods                                                                                                                                                                              | `""`                          |
| `configValues.topologySpreadConstraints[0].maxSkew`           | Responsible on Pod placement between zones                                                                                                                                                                                           | `1`                           |
| `configValues.topologySpreadConstraints[0].topologyKey`       | Responsible on Pod placement between zones                                                                                                                                                                                           | `topology.kubernetes.io/zone` |
| `configValues.topologySpreadConstraints[0].whenUnsatisfiable` | Indicates how to deal with a Pod if it doesn't satisfy the spread constraint                                                                                                                                                         | `DoNotSchedule`               |
| `configValues.topologySpreadConstraints[0].labelSelector`     | Is used to find matching Pods                                                                                                                                                                                                        | `undefined`                   |
| `configValues.podSecurityContext.enabled`                     | Enable pods' Security Context                                                                                                                                                                                                        | `false`                       |
| `configValues.podSecurityContext.fsGroupChangePolicy`         | Set filesystem group change policy for pods                                                                                                                                                                                          | `Always`                      |
| `configValues.podSecurityContext.sysctls`                     | Set kernel settings using the sysctl interface for pods                                                                                                                                                                              | `[]`                          |
| `configValues.podSecurityContext.supplementalGroups`          | Set filesystem extra groups for pods                                                                                                                                                                                                 | `[]`                          |
| `configValues.podSecurityContext.fsGroup`                     | Set fsGroup in pods' Security Context                                                                                                                                                                                                | `1001`                        |
| `configValues.terminationGracePeriodSeconds`                  | Seconds for pods need to terminate gracefully                                                                                                                                                                                        | `""`                          |
| `configValues.initContainers`                                 | Add additional init containers to the pods                                                                                                                                                                                           | `[]`                          |
| `configValues.image.repository`                               | Image repository                                                                                                                                                                                                                     | `dem-heights`                 |
| `configValues.image.digest`                                   | image digest in the way sha256:aa.... Please note this parameter, if set, will override the tag image tag (immutable tags are recommended)                                                                                           | `""`                          |
| `configValues.image.pullPolicy`                               | image pull policy. Defaults to 'Always' if image tag is 'latest', else set to 'IfNotPresent'                                                                                                                                         | `IfNotPresent`                |
| `configValues.image.pullSecrets`                              | image pull secrets. Secrets must be manually created in the namespace.                                                                                                                                                               | `[]`                          |
| `configValues.image.debug`                                    | Enable image debug mode                                                                                                                                                                                                              | `false`                       |
| `configValues.containerSecurityContext.enabled`               | Enabled container' Security Context                                                                                                                                                                                                  | `false`                       |
| `configValues.containerSecurityContext.runAsNonRoot`          | Set runAsNonRoot in container' Security Context                                                                                                                                                                                      | `true`                        |
| `configValues.containerSecurityContext.runAsUser`             | Set runAsUser in container' Security Context                                                                                                                                                                                         | `1001`                        |
| `configValues.command`                                        | Override default container command (useful when using custom images)                                                                                                                                                                 | `[]`                          |
| `configValues.args`                                           | Override default container args (useful when using custom images)                                                                                                                                                                    | `[]`                          |
| `configValues.extraEnvVars`                                   | Array with extra environment variables to add to containers                                                                                                                                                                          | `[]`                          |
| `configValues.extraEnvVarsCM`                                 | Name of existing ConfigMap containing extra env vars for containers                                                                                                                                                                  | `""`                          |
| `configValues.extraEnvVarsSecret`                             | Name of existing Secret containing extra env vars for containers                                                                                                                                                                     | `""`                          |
| `configValues.resources`                                      | Set container requests and limits for different resources like CPU or memory (essential for production workloads)                                                                                                                    | `{}`                          |
| `configValues.resourcesPreset`                                | Set container resources according to one common preset (allowed values: none, nano, small, medium, large, xlarge, 2xlarge). This is ignored if configValues.resources is set (configValues.resources is recommended for production). | `nano`                        |
| `configValues.containerPorts.http`                            | HTTP container port                                                                                                                                                                                                                  | `80`                          |
| `configValues.containerPorts.https`                           | HTTPS container port                                                                                                                                                                                                                 | `443`                         |
| `configValues.customLivenessProbe`                            | Custom livenessProbe that overrides the default one                                                                                                                                                                                  | `{}`                          |
| `configValues.livenessProbe.enabled`                          | Enable livenessProbe on containers                                                                                                                                                                                                   | `true`                        |
| `configValues.livenessProbe.initialDelaySeconds`              | Initial delay seconds for livenessProbe                                                                                                                                                                                              | `60`                          |
| `configValues.livenessProbe.periodSeconds`                    | Period seconds for livenessProbe                                                                                                                                                                                                     | `10`                          |
| `configValues.livenessProbe.timeoutSeconds`                   | Timeout seconds for livenessProbe                                                                                                                                                                                                    | `1`                           |
| `configValues.livenessProbe.failureThreshold`                 | Failure threshold for livenessProbe                                                                                                                                                                                                  | `3`                           |
| `configValues.livenessProbe.successThreshold`                 | Success threshold for livenessProbe                                                                                                                                                                                                  | `1`                           |
| `configValues.customReadinessProbe`                           | Custom readinessProbe that overrides the default one                                                                                                                                                                                 | `{}`                          |
| `configValues.readinessProbe.enabled`                         | Enable readinessProbe on containers                                                                                                                                                                                                  | `true`                        |
| `configValues.readinessProbe.initialDelaySeconds`             | Initial delay seconds for readinessProbe                                                                                                                                                                                             | `60`                          |
| `configValues.readinessProbe.periodSeconds`                   | Period seconds for readinessProbe                                                                                                                                                                                                    | `10`                          |
| `configValues.readinessProbe.timeoutSeconds`                  | Timeout seconds for readinessProbe                                                                                                                                                                                                   | `1`                           |
| `configValues.readinessProbe.failureThreshold`                | Failure threshold for readinessProbe                                                                                                                                                                                                 | `3`                           |
| `configValues.readinessProbe.successThreshold`                | Success threshold for readinessProbe                                                                                                                                                                                                 | `1`                           |
| `configValues.customStartupProbe`                             | Custom startupProbe that overrides the default one                                                                                                                                                                                   | `{}`                          |
| `configValues.startupProbe.enabled`                           | Enable startupProbe on containers                                                                                                                                                                                                    | `true`                        |
| `configValues.startupProbe.initialDelaySeconds`               | Initial delay seconds for startupProbe                                                                                                                                                                                               | `60`                          |
| `configValues.startupProbe.periodSeconds`                     | Period seconds for startupProbe                                                                                                                                                                                                      | `10`                          |
| `configValues.startupProbe.timeoutSeconds`                    | Timeout seconds for startupProbe                                                                                                                                                                                                     | `1`                           |
| `configValues.startupProbe.failureThreshold`                  | Failure threshold for startupProbe                                                                                                                                                                                                   | `3`                           |
| `configValues.startupProbe.successThreshold`                  | Success threshold for startupProbe                                                                                                                                                                                                   | `1`                           |
| `configValues.lifecycleHooks`                                 | for containers to automate configuration before or after startup                                                                                                                                                                     | `{}`                          |
| `configValues.extraVolumes`                                   | Optionally specify extra list of additional volumes for the pods                                                                                                                                                                     | `[]`                          |
| `configValues.extraVolumeMounts`                              | Optionally specify extra list of additional volumeMounts for the containers                                                                                                                                                          | `[]`                          |
| `configValues.sidecars`                                       | Add additional sidecar containers to the pods                                                                                                                                                                                        | `[]`                          |

### route parameters

| Name                                      | Description                                                                                                                                                 | Value             |
| ----------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------- | ----------------- |
| `route.enabled`                           | Is route enabled for service                                                                                                                                | `true`            |
| `route.annotations`                       | Additional custom annotations for route                                                                                                                     | `undefined`       |
| `route.hostname`                          | Route hostname(DNS)                                                                                                                                         | `""`              |
| `route.path`                              | Route path                                                                                                                                                  | `/api/heights/v1` |
| `route.targetPort`                        | Route target port                                                                                                                                           | `8000`            |
| `route.tls.enabled`                       | is route SSL enabled                                                                                                                                        | `true`            |
| `route.tls.useCerts`                      | Is route should use certificates                                                                                                                            | `true`            |
| `route.tls.termination`                   | Secure routes provide the ability to use several types of TLS termination to serve certificates to the client (edge | passthrough | reencrypt)              | `edge`            |
| `route.tls.insecureEdgeTerminationPolicy` | Edge-terminated routes can specify policy that enables traffic on insecure schemes (HTTP) to be disabled, (None or empty (for disabled) | Allow | Redirect) | `Redirect`        |
| `route.extraRules`                        | Custom additional route rules                                                                                                                               | `{}`              |
| `route.timeout.enabled`                   | Timeout enabled                                                                                                                                             | `false`           |
| `route.timeout.duration`                  | Timeout duration. Supported units (us, ms, s, m, h, d)                                                                                                      | `60s`             |

### ingress parameters

| Name                       | Description                                                                                                                      | Value                  |
| -------------------------- | -------------------------------------------------------------------------------------------------------------------------------- | ---------------------- |
| `ingress.enabled`          | Is route enabled for service                                                                                                     | `true`                 |
| `ingress.apiVersion`       | Force Ingress API version (automatically detected if not set)                                                                    | `""`                   |
| `ingress.type`             | Ingress type supported by OS/K8S. Values: 'nginx-org' | 'nginx-kubernetes'                                                       | `nginx-org`            |
| `ingress.annotations`      | Additional annotations for the Ingress resource. To enable certificate autogeneration, place here your cert-manager annotations. | `{}`                   |
| `ingress.pathType`         | Ingress path type                                                                                                                | `Prefix`               |
| `ingress.hostname`         | Route hostname(DNS)                                                                                                              | `COMPONENT_NAME.local` |
| `ingress.ingressClassName` | IngressClass that will be be used to implement the Ingress (Kubernetes 1.18+)                                                    | `""`                   |
| `ingress.extraHosts`       | An array with additional hostname(s) to be covered with the ingress record                                                       | `[]`                   |
| `ingress.extraPaths`       | An array with additional arbitrary paths that may need to be added to the ingress under the main host                            | `[]`                   |
| `ingress.path`             | Default path for the ingress record                                                                                              | `/dem-heights`         |
| `ingress.extraRules`       | Additional rules to be covered with this ingress record                                                                          | `[]`                   |
| `ingress.extraTls`         | TLS configuration for additional hostname(s) to be covered with this ingress record                                              | `[]`                   |
| `ingress.selfSigned`       | Create a TLS secret for this ingress record using self-signed certificates generated by Helm                                     | `false`                |
| `ingress.tls`              | Enable TLS configuration for the host defined at `ingress.hostname` parameter                                                    | `true`                 |
| `ingress.cors.enabled`     | Is CORS enabled                                                                                                                  | `true`                 |
| `ingress.cors.origin`      | Is CORS allowed origin                                                                                                           | `*`                    |

### service parameters

| Name                               | Description                                                                | Value      |
| ---------------------------------- | -------------------------------------------------------------------------- | ---------- |
| `service.type`                     | service type (NodePort | ClusterIP | LoadBalancer | ExternalName)          | `NodePort` |
| `service.protocol`                 | Protocol for service (TCP | SCTP | UDP)                                    | `TCP`      |
| `service.annotations`              | Additional custom annotations for service                                  | `{}`       |
| `service.clusterIP`                | service Cluster IP                                                         | `""`       |
| `service.sessionAffinity`          | Control where client requests go, to the same pod or round-robin           | `""`       |
| `service.sessionAffinityConfig`    | Additional settings for the sessionAffinity                                | `{}`       |
| `service.externalTrafficPolicy`    | service external traffic policy. Probably default should be "Cluster"      | `""`       |
| `service.loadBalancerSourceRanges` | service Load Balancer sources                                              | `[]`       |
| `service.loadBalancerIP`           | service Load Balancer IP                                                   | `""`       |
| `service.ports.http`               | service HTTP port                                                          | `80`       |
| `service.ports.https`              | service HTTPS port                                                         | `""`       |
| `service.nodePorts.http`           | Node port for HTTP                                                         | `""`       |
| `service.nodePorts.https`          | Node port for HTTPS                                                        | `""`       |
| `service.extraPorts`               | Extra ports to expose in service (normally used with the `sidecars` value) | `[]`       |

### serviceAccount parameters

| Name                                          | Description                                                      | Value  |
| --------------------------------------------- | ---------------------------------------------------------------- | ------ |
| `serviceAccount.create`                       | Specifies whether a ServiceAccount should be created             | `true` |
| `serviceAccount.name`                         | The name of the ServiceAccount to use.                           | `""`   |
| `serviceAccount.annotations`                  | Additional Service Account annotations (evaluated as a template) | `{}`   |
| `serviceAccount.automountServiceAccountToken` | Automount service account token for the server service account   | `true` |

### rbac parameters

| Name          | Description                                        | Value   |
| ------------- | -------------------------------------------------- | ------- |
| `rbac.create` | Specifies whether RBAC resources should be created | `false` |
| `rbac.rules`  | Custom RBAC rules to set                           | `[]`    |

### podSecurityPolicy parameters

| Name                        | Description                                                                                                                                 | Value   |
| --------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------- | ------- |
| `podSecurityPolicy.create`  | Whether to create a PodSecurityPolicy. WARNING: PodSecurityPolicy is deprecated in Kubernetes v1.21 or later, unavailable in v1.25 or later | `false` |
| `podSecurityPolicy.enabled` | Enable PodSecurityPolicy's RBAC rules                                                                                                       | `false` |
