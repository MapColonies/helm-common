# Helm Common 

This repo holds a MapColonies ChartLibrary which encapsulates HELM templates of k8s/openshift deployment resources (eg. deployment, service, configmap, route, ingress and etc.). <br/>
The inspiration comes from BITNAMI [template/CHART_NAME/templates](https://github.com/bitnami/charts/tree/main/template/CHART_NAME/templates)

For example, implementation of k8s resource with named templates from this ChartLibrary should looks like:
``` yaml
    # deployment.yaml

    {{- $MAIN_OBJECT_BLOCK := "configValues" -}}
    {{- $COMPONENT_NAME := "backend" -}}
    {{ include "mc-chart.deployment" (dict "MAIN_OBJECT_BLOCK" $MAIN_OBJECT_BLOCK "COMPONENT_NAME" $COMPONENT_NAME "context" .) }}
```
``` yaml
    # service.yaml

    {{- $MAIN_OBJECT_BLOCK := "configValues" -}}
    {{- $COMPONENT_NAME := "backend" -}}
    {{ include "mc-chart.service" (dict "MAIN_OBJECT_BLOCK" $MAIN_OBJECT_BLOCK "COMPONENT_NAME" $COMPONENT_NAME "context" .) }}
```
> [!IMPORTANT] 
> This ChartLibrary is based on **values driven** approach (k8s respective resource will be generated according to supplied values).<br/>
> This repo also contains MapColonies JSON schemas for **global.yaml** and **values.yaml**.
> Those schemas will be in use by [ts-server-boilerplate](https://github.com/MapColonies/ts-server-boilerplate/) and all service repos that start from this boilerplate.

## Maintanance
In order to re-generate README.md (params based on values.yaml commented by [# @param])<br/>
Used: https://github.com/bitnami/readme-generator-for-helm
```bash
    npm run gen-readme
```

In order to re-generate schemas (based on global.yaml and values.yaml commented by [# @schema]) <br/>
Used: https://github.com/losisin/helm-values-schema-json
```bash
    npm run gen-schemas
```

## Parameters

### global values

These params are prerequisites and managed by INFRA team per specific network/namespace

| Name                                          | Description                                                                                                       | Value                                                             |
| --------------------------------------------- | ----------------------------------------------------------------------------------------------------------------- | ----------------------------------------------------------------- |
| `global.authorization.opa.enabled`            | is OPA style authorization enabled                                                                                | `false`                                                           |
| `global.authorization.opa.customHeaderName`   | http header name which holds token value                                                                          | `x-api-key`                                                       |
| `global.authorization.opala.enabled`          | is OPALA style authorization enabled                                                                              | `true`                                                            |
| `global.authorization.opala.url`              | URL of OPALA service                                                                                              | `http://opala-service.infra-services/v1/data/http/authz/decision` |
| `global.authorization.opala.token.queryName`  | OPALA token propregation queryname param                                                                          | `token`                                                           |
| `global.authorization.jwtPublicKeySecretName` | jwt public key secret name                                                                                        | `map-colonies-jwks`                                               |
| `global.configManagment.enabled`              | configuration for configManagment service                                                                         | `false`                                                           |
| `global.configManagment.url`                  | configManagment service URL                                                                                       | `CONFIG-MANAGMENT_URL`                                            |
| `global.imageRegistry`                        | Registry URL where docker images are stored                                                                       | `YOUR_IMAGE-REGISTRY`                                             |
| `global.imagePullSecrets`                     | Registry Pull Secret names                                                                                        | `["YOUR_IMAGE-PULL-SECRET_1"]`                                    |
| `global.deploymentFlavor`                     | Deployment flavor (if ommited default value is "minikube")                                                        | `openshift`                                                       |
| `global.tracing.enabled`                      | configuration for trace collection                                                                                | `false`                                                           |
| `global.tracing.url`                          | traces url                                                                                                        | `http://localhost:55681/v1/traces`                                |
| `global.metrics.enabled`                      | configuration for metrics collection                                                                              | `false`                                                           |
| `global.metrics.url`                          | traces url                                                                                                        | `http://localhost:55681/v1/metrics`                               |
| `global.environment`                          | In which environment will be performed deployment. Allowed values: "development", "production", "test", "staging" | `development`                                                     |
| `global.releaseVersion`                       | MapColonies release version                                                                                       | `1.20.2`                                                          |
| `global.currentSubChart`                      | Defines which UMBRELLA is currently in deployment, should be injected by --set flag                               | `DUMMY_currentSubChart`                                           |
| `global.s3.server`                            | s3 server IP/URL                                                                                                  | `******** S3_SERVER(IP/URL) ********`                             |
| `global.s3.serverPort`                        | s3 server port                                                                                                    | `-9999`                                                           |
| `global.s3.serverProto`                       | s3 server protocol. Allowed values: `http` or `https`                                                             | `http`                                                            |
| `global.s3.region`                            | s3 region                                                                                                         | `******** S3_REGION ********`                                     |
| `global.s3.style`                             | s3 path style                                                                                                     | `path`                                                            |
| `global.s3.sigVersion`                        | s3 signature version                                                                                              | `4`                                                               |
| `global.s3.storageClass`                      | s3 storage class                                                                                                  | `STANDARD`                                                        |
| `global.db.host`                              | db server IP/URL                                                                                                  | `******** DB_SERVER(IP/URL) ********`                             |
| `global.db.port`                              | db server port                                                                                                    | `-9999`                                                           |
| `global.db.secretName`                        | db server port                                                                                                    | `postgres-secret`                                                 |
| `global.db.ssl.enabled`                       | is db ssl enabled                                                                                                 | `false`                                                           |
| `global.db.ssl.rejectUnauthorized`            | db user rejectUnauthorized                                                                                        | `true`                                                            |
| `global.tlsCertificates[0].name`              | name of certificate                                                                                               | `wildcard.mapcolonies.net`                                        |
| `global.tlsCertificates[0].hostname`          | hostname(dns) of certificate                                                                                      | `YOUR_SUB-DOMAIN_1.mapcolonies.net`                               |
| `global.tlsCertificates[0].certificate`       | certificate value or aliased value                                                                                | `DUMMY_certificate_VALUE_OR_ALIAS`                                |
| `global.tlsCertificates[0].key`               | key value or aliased value                                                                                        | `DUMMY_key_VALUE_OR_ALIAS`                                        |
| `global.tlsCertificates[0].caCertificate`     | caCertificate value or aliased value                                                                              | `DUMMY_caCertificate_VALUE_OR_ALIAS`                              |
| `global.secrets[0].name`                      | secret name                                                                                                       | `postgres-secret`                                                 |
| `global.secrets[0].type`                      | secret type                                                                                                       | `Opaque`                                                          |
| `global.secrets[0].path`                      | secret path. Root folder path where secret's ALL data, if needed, will be kept in pod                             | `nil`                                                             |
| `global.secrets[0].data[0].key`               | data key name                                                                                                     | `username`                                                        |
| `global.secrets[0].data[0].value`             | data key value                                                                                                    | `DB_USER_NAME`                                                    |
| `global.secrets[0].data[1].key`               | data key name                                                                                                     | `password`                                                        |
| `global.secrets[0].data[1].value`             | data key value                                                                                                    | `DB_USER_PASSWORD`                                                |
| `global.secrets[0].data[2].key`               | data key name                                                                                                     | `caFileName`                                                      |
| `global.secrets[0].data[2].value`             | data key value                                                                                                    | `CA_FILE_NAME`                                                    |
| `global.secrets[0].data[3].key`               | data key name                                                                                                     | `certFileName`                                                    |
| `global.secrets[0].data[3].value`             | data key value                                                                                                    | `CERT_FILE_NAME`                                                  |
| `global.secrets[0].data[4].key`               | data key name                                                                                                     | `keyFileName`                                                     |
| `global.secrets[0].data[4].value`             | data key value                                                                                                    | `KEY_FILE_NAME`                                                   |
| `global.persistences[0].name`                 | pvc name                                                                                                          | `internal-pvc-nfs`                                                |
| `global.persistences[0].accessModes`          | pvc access Modes. Allowed values: `ReadWriteOnce`, `ReadOnlyMany`, `ReadWriteMany`, `ReadWriteOncePod`            | `["ReadWriteMany"]`                                               |
| `global.persistences[0].size`                 | pvc size.                                                                                                         | `50Gi`                                                            |
| `global.persistences[0].storageClassName`     | pvc storage className (created by net managers).                                                                  | `nfs`                                                             |

### shared parameters

These params are shared between different sections.

| Name                        | Description                                                              | Value   |
| --------------------------- | ------------------------------------------------------------------------ | ------- |
| `nameOverride`              | Override Chart name if needed                                            | `""`    |
| `fullnameOverride`          | Override fullname                                                        | `""`    |
| `kubeVersion`               | Kubernetes version                                                       | `""`    |
| `commonLabels`              | Labels to add for all k8s resources                                      | `{}`    |
| `commonAnnotations`         | Annotations to add for all k8s resources                                 | `{}`    |
| `volumePermissions.enabled` | Is initContainers "process" should be included                           | `false` |
| `persistence.enabled`       | Is initContainers "process" should be included also volumes are defined  | `false` |
| `diagnosticMode.enabled`    | Is container command/args should be defined                              | `false` |

### configValues parameters

This description starts in a new line instead of the same line of description start tag. It does not have multiple lines.

| Name                                                          | Description                                                                                                                                                                                                                          | Value                                      |
| ------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ | ------------------------------------------ |
| `configValues.deploymentAnnotations`                          | Annotations for deployment                                                                                                                                                                                                           | `{}`                                       |
| `configValues.autoscaling.enabled`                            | Is autoscaling defined for pods (currently should be FALSE, TRUE still not tested)                                                                                                                                                   | `false`                                    |
| `configValues.autoscaling.vpa.enabled`                        | Enable VPA for pods (currently should be FALSE, TRUE still not tested)                                                                                                                                                               | `false`                                    |
| `configValues.autoscaling.vpa.annotations`                    | Annotations for VPA resource                                                                                                                                                                                                         | `{}`                                       |
| `configValues.autoscaling.vpa.controlledResources`            | VPA List of resources that the vertical pod autoscaler can control. Defaults to cpu and memory                                                                                                                                       | `[]`                                       |
| `configValues.autoscaling.vpa.maxAllowed`                     | VPA Max allowed resources for the pod                                                                                                                                                                                                | `{}`                                       |
| `configValues.autoscaling.vpa.minAllowed`                     | VPA Min allowed resources for the pod                                                                                                                                                                                                | `{}`                                       |
| `configValues.autoscaling.vpa.updatePolicy.updateMode`        | Autoscaling update policy                                                                                                                                                                                                            | `Auto`                                     |
| `configValues.autoscaling.hpa.enabled`                        | Enable HPA for pods                                                                                                                                                                                                                  | `false`                                    |
| `configValues.autoscaling.hpa.minReplicas`                    | Minimum number of replicas                                                                                                                                                                                                           | `1`                                        |
| `configValues.autoscaling.hpa.maxReplicas`                    | Maximum number of replicas                                                                                                                                                                                                           | `1`                                        |
| `configValues.autoscaling.hpa.targetCPU`                      | Target CPU utilization percentage                                                                                                                                                                                                    | `60`                                       |
| `configValues.autoscaling.hpa.targetMemory`                   | Target Memory utilization percentage                                                                                                                                                                                                 | `nil`                                      |
| `configValues.replicaCount`                                   | Number of replicas to deploy                                                                                                                                                                                                         | `1`                                        |
| `configValues.revisionHistoryLimit`                           | Number of revision to preserve, default value is 5                                                                                                                                                                                   | `nil`                                      |
| `configValues.updateStrategy`                                 | Update strategy of deploy. For more details see values.yaml                                                                                                                                                                          | `{}`                                       |
| `configValues.podLabels`                                      | Extra labels for pods                                                                                                                                                                                                                | `{}`                                       |
| `configValues.podAnnotations.enabled`                         | Enable pod annotations                                                                                                                                                                                                               | `true`                                     |
| `configValues.podAnnotations.resetOnConfigChange`             | Relative annnotation for reset onConfig change                                                                                                                                                                                       | `true`                                     |
| `configValues.podAnnotations.annotations`                     | Additional pod annotations                                                                                                                                                                                                           | `{}`                                       |
| `configValues.prometheus.scrape`                              | Flag for prometheus to scrape service metrics                                                                                                                                                                                        | `true`                                     |
| `configValues.prometheus.port`                                | If the metrics are exposed on a different port to the service then set this appropriately                                                                                                                                            | `8080`                                     |
| `configValues.prometheus.path`                                | If the metrics path is not `/metrics` override it                                                                                                                                                                                    | `/metrics`                                 |
| `configValues.prometheus.scheme`                              | If the metrics endpoint is secured then you will need to set this to `https` & most likely set the `tls_config` of the scrape config                                                                                                 | `http`                                     |
| `configValues.prometheus.params`                              | If the metrics endpoint uses query parameters then you can set any parameter (will be added as annotations)                                                                                                                          | `[]`                                       |
| `configValues.hostAliases`                                    | Pods host aliases                                                                                                                                                                                                                    | `[]`                                       |
| `configValues.affinity`                                       | Affinity for pods assignment                                                                                                                                                                                                         | `{}`                                       |
| `configValues.podAffinityPreset`                              | Pod affinity preset. Ignored if `configValues.affinity` is set. Allowed values: `soft` or `hard`                                                                                                                                     | `""`                                       |
| `configValues.podAntiAffinityPreset`                          | Pod anti-affinity preset. Ignored if `configValues.affinity` is set. Allowed values: `soft` or `hard`                                                                                                                                | `soft`                                     |
| `configValues.nodeAffinityPreset`                             | Node afinity preset                                                                                                                                                                                                                  | `{}`                                       |
| `configValues.nodeSelector`                                   | Recommended form of node selection constraint                                                                                                                                                                                        | `{}`                                       |
| `configValues.tolerations`                                    | Tolerations for pods assignment                                                                                                                                                                                                      | `[]`                                       |
| `configValues.priorityClassName`                              | pods' priorityClassName                                                                                                                                                                                                              | `""`                                       |
| `configValues.schedulerName`                                  | Name of the k8s scheduler (other than default) for pods                                                                                                                                                                              | `""`                                       |
| `configValues.topologySpreadConstraints[0].maxSkew`           | Responsible on Pod placement between zones                                                                                                                                                                                           | `1`                                        |
| `configValues.topologySpreadConstraints[0].topologyKey`       | Responsible on Pod placement between zones                                                                                                                                                                                           | `topology.kubernetes.io/zone`              |
| `configValues.topologySpreadConstraints[0].whenUnsatisfiable` | Indicates how to deal with a Pod if it doesn't satisfy the spread constraint                                                                                                                                                         | `DoNotSchedule`                            |
| `configValues.topologySpreadConstraints[0].labelSelector`     | Is used to find matching Pods                                                                                                                                                                                                        | `undefined`                                |
| `configValues.podSecurityContext.enabled`                     | Enable pods' Security Context                                                                                                                                                                                                        | `false`                                    |
| `configValues.podSecurityContext.fsGroupChangePolicy`         | Set filesystem group change policy for pods. Allowed values: Always, OnRootMismatch                                                                                                                                                  | `Always`                                   |
| `configValues.podSecurityContext.sysctls`                     | Set kernel settings using the sysctl interface for pods                                                                                                                                                                              | `[]`                                       |
| `configValues.podSecurityContext.supplementalGroups`          | Set filesystem extra groups for pods                                                                                                                                                                                                 | `[]`                                       |
| `configValues.podSecurityContext.fsGroup`                     | Set fsGroup in pods' Security Context                                                                                                                                                                                                | `1001`                                     |
| `configValues.terminationGracePeriodSeconds`                  | Seconds for pods need to terminate gracefully                                                                                                                                                                                        | `""`                                       |
| `configValues.initContainers`                                 | Add additional init containers to the pods                                                                                                                                                                                           | `[]`                                       |
| `configValues.image.repository`                               | Image repository                                                                                                                                                                                                                     | `******** YOUR_REPO ********`              |
| `configValues.image.digest`                                   | image digest in the way sha256:aa.... Please note this parameter, if set, will override the image tag (immutable tags are recommended)                                                                                               | `""`                                       |
| `configValues.image.pullPolicy`                               | image pull policy. Defaults to 'Always' if image tag is 'latest', else set to 'IfNotPresent'                                                                                                                                         | `IfNotPresent`                             |
| `configValues.image.pullSecrets`                              | image pull secrets. Secrets must be manually created in the namespace.                                                                                                                                                               | `[]`                                       |
| `configValues.image.debug`                                    | Enable image debug mode                                                                                                                                                                                                              | `false`                                    |
| `configValues.containerSecurityContext.enabled`               | Enabled container' Security Context                                                                                                                                                                                                  | `false`                                    |
| `configValues.containerSecurityContext.runAsNonRoot`          | Set runAsNonRoot in container' Security Context                                                                                                                                                                                      | `true`                                     |
| `configValues.containerSecurityContext.runAsUser`             | Set runAsUser in container' Security Context                                                                                                                                                                                         | `1001`                                     |
| `configValues.command`                                        | Override default container command (useful when using custom images)                                                                                                                                                                 | `[]`                                       |
| `configValues.args`                                           | Override default container args (useful when using custom images)                                                                                                                                                                    | `[]`                                       |
| `configValues.extraEnvVars`                                   | Array with extra environment variables to add to containers                                                                                                                                                                          | `[]`                                       |
| `configValues.extraEnvVarsCM`                                 | Name of existing ConfigMap containing extra env vars for containers                                                                                                                                                                  | `{{ template "common.names.fullname" . }}` |
| `configValues.extraEnvVarsSecret`                             | Name of existing Secret containing extra env vars for containers                                                                                                                                                                     | `""`                                       |
| `configValues.resources`                                      | Set container requests and limits for different resources like CPU or memory (essential for production workloads)                                                                                                                    | `{}`                                       |
| `configValues.resourcesPreset`                                | Set container resources according to one common preset (allowed values: none, nano, small, medium, large, xlarge, 2xlarge). This is ignored if configValues.resources is set (configValues.resources is recommended for production). | `nano`                                     |
| `configValues.containerPorts.http`                            | HTTP container port                                                                                                                                                                                                                  | `8080`                                     |
| `configValues.containerPorts.https`                           | HTTPS container port                                                                                                                                                                                                                 | `443`                                      |
| `configValues.customLivenessProbe`                            | Custom-livenessProbe that overrides the livenessProbe                                                                                                                                                                                | `{}`                                       |
| `configValues.livenessProbe.enabled`                          | Enable livenessProbe on containers                                                                                                                                                                                                   | `true`                                     |
| `configValues.livenessProbe.initialDelaySeconds`              | Initial delay seconds for livenessProbe                                                                                                                                                                                              | `60`                                       |
| `configValues.livenessProbe.periodSeconds`                    | Period seconds for livenessProbe                                                                                                                                                                                                     | `10`                                       |
| `configValues.livenessProbe.timeoutSeconds`                   | Timeout seconds for livenessProbe                                                                                                                                                                                                    | `1`                                        |
| `configValues.livenessProbe.failureThreshold`                 | Failure threshold for livenessProbe                                                                                                                                                                                                  | `3`                                        |
| `configValues.livenessProbe.successThreshold`                 | Success threshold for livenessProbe                                                                                                                                                                                                  | `1`                                        |
| `configValues.customReadinessProbe`                           | Custom readinessProbe that overrides the default one                                                                                                                                                                                 | `{}`                                       |
| `configValues.readinessProbe.enabled`                         | Enable readinessProbe on containers                                                                                                                                                                                                  | `true`                                     |
| `configValues.readinessProbe.initialDelaySeconds`             | Initial delay seconds for readinessProbe                                                                                                                                                                                             | `60`                                       |
| `configValues.readinessProbe.periodSeconds`                   | Period seconds for readinessProbe                                                                                                                                                                                                    | `10`                                       |
| `configValues.readinessProbe.timeoutSeconds`                  | Timeout seconds for readinessProbe                                                                                                                                                                                                   | `1`                                        |
| `configValues.readinessProbe.failureThreshold`                | Failure threshold for readinessProbe                                                                                                                                                                                                 | `3`                                        |
| `configValues.readinessProbe.successThreshold`                | Success threshold for readinessProbe                                                                                                                                                                                                 | `1`                                        |
| `configValues.customStartupProbe`                             | Custom startupProbe that overrides the default one                                                                                                                                                                                   | `{}`                                       |
| `configValues.startupProbe.enabled`                           | Enable startupProbe on containers                                                                                                                                                                                                    | `true`                                     |
| `configValues.startupProbe.initialDelaySeconds`               | Initial delay seconds for startupProbe                                                                                                                                                                                               | `60`                                       |
| `configValues.startupProbe.periodSeconds`                     | Period seconds for startupProbe                                                                                                                                                                                                      | `10`                                       |
| `configValues.startupProbe.timeoutSeconds`                    | Timeout seconds for startupProbe                                                                                                                                                                                                     | `1`                                        |
| `configValues.startupProbe.failureThreshold`                  | Failure threshold for startupProbe                                                                                                                                                                                                   | `3`                                        |
| `configValues.startupProbe.successThreshold`                  | Success threshold for startupProbe                                                                                                                                                                                                   | `1`                                        |
| `configValues.lifecycleHooks`                                 | for containers to automate configuration before or after startup                                                                                                                                                                     | `{}`                                       |
| `configValues.extraVolumes`                                   | Optionally specify extra list of additional volumes for the pods                                                                                                                                                                     | `[]`                                       |
| `configValues.extraVolumeMounts`                              | Optionally specify extra list of additional volumeMounts for the containers                                                                                                                                                          | `[]`                                       |
| `configValues.sidecars`                                       | Add additional sidecar containers to the pods                                                                                                                                                                                        | `[]`                                       |
| `db.name`                                                     | db name                                                                                                                                                                                                                              | `******** YOUR_DB_NAME ********`           |
| `db.schema`                                                   | db schema name                                                                                                                                                                                                                       | `public`                                   |
| `s3.bucket`                                                   | s3 bucket. IMPORTANT: MUST BE OVERIDEN OR INJECTED DURING DEPLOYMENT PROCESS.                                                                                                                                                        | `******** YOUR_S3_BUCKET ********`         |

### route parameters

| Name                                      | Description                                                                                                                                                 | Value             |
| ----------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------- | ----------------- |
| `route.enabled`                           | Is route enabled for service                                                                                                                                | `true`            |
| `route.annotations`                       | Additional custom annotations for route                                                                                                                     | `undefined`       |
| `route.hostname`                          | Route hostname(DNS)                                                                                                                                         | `""`              |
| `route.path`                              | Route path                                                                                                                                                  | `/api/heights/v1` |
| `route.targetPort`                        | Route target port                                                                                                                                           | `8080`            |
| `route.tls.enabled`                       | Is route SSL enabled                                                                                                                                        | `true`            |
| `route.tls.useCerts`                      | Is route should use certificates                                                                                                                            | `true`            |
| `route.tls.termination`                   | Secure routes provide the ability to use several types of TLS termination to serve certificates to the client (edge | passthrough | reencrypt)              | `edge`            |
| `route.tls.insecureEdgeTerminationPolicy` | Edge-terminated routes can specify policy that enables traffic on insecure schemes (HTTP) to be disabled, (None or empty (for disabled) | Allow | Redirect) | `Redirect`        |
| `route.extraRules`                        | Custom additional route configurations                                                                                                                      | `{}`              |
| `route.timeout.enabled`                   | Timeout enabled                                                                                                                                             | `false`           |
| `route.timeout.duration`                  | Timeout duration. Supported units (us, ms, s, m, h, d)                                                                                                      | `60s`             |

### ingress parameters

| Name                       | Description                                                                                                                      | Value                       |
| -------------------------- | -------------------------------------------------------------------------------------------------------------------------------- | --------------------------- |
| `ingress.enabled`          | Is ingress enabled for service                                                                                                   | `true`                      |
| `ingress.apiVersion`       | Force Ingress API version (automatically detected if not set)                                                                    | `""`                        |
| `ingress.type`             | Ingress type supported by OS/K8S. Values: 'nginx-org' | 'nginx-kubernetes'                                                       | `nginx-org`                 |
| `ingress.annotations`      | Additional annotations for the Ingress resource. To enable certificate autogeneration, place here your cert-manager annotations. | `{}`                        |
| `ingress.pathType`         | Ingress path type                                                                                                                | `Prefix`                    |
| `ingress.hostname`         | Route hostname(DNS)                                                                                                              | `YOUR_COMPONENT_NAME.local` |
| `ingress.ingressClassName` | IngressClass that will be be used to implement the Ingress (Kubernetes 1.18+)                                                    | `""`                        |
| `ingress.extraHosts`       | An array with additional hostname(s) to be covered with the ingress record                                                       | `[]`                        |
| `ingress.extraPaths`       | An array with additional arbitrary paths that may need to be added to the ingress under the main host                            | `[]`                        |
| `ingress.path`             | Default path for the ingress record                                                                                              | `/YOUR_PATH`                |
| `ingress.extraRules`       | Additional rules to be covered with this ingress record                                                                          | `[]`                        |
| `ingress.extraTls`         | TLS configuration for additional hostname(s) to be covered with this ingress record                                              | `[]`                        |
| `ingress.selfSigned`       | Create a TLS secret for this ingress record using self-signed certificates generated by Helm                                     | `false`                     |
| `ingress.tls`              | Enable TLS configuration for the host defined at `ingress.hostname` parameter                                                    | `true`                      |
| `ingress.cors.enabled`     | Is CORS enabled                                                                                                                  | `true`                      |
| `ingress.cors.origin`      | Is CORS allowed origin                                                                                                           | `*`                         |

### service parameters

| Name                               | Description                                                                | Value       |
| ---------------------------------- | -------------------------------------------------------------------------- | ----------- |
| `service.type`                     | service type (NodePort | ClusterIP | LoadBalancer | ExternalName)          | `ClusterIP` |
| `service.protocol`                 | Protocol for service (TCP | SCTP | UDP)                                    | `TCP`       |
| `service.annotations`              | Additional custom annotations for service                                  | `{}`        |
| `service.clusterIP`                | service Cluster IP                                                         | `""`        |
| `service.sessionAffinity`          | Control where client requests go, to the same pod or round-robin           | `""`        |
| `service.sessionAffinityConfig`    | Additional settings for the sessionAffinity                                | `{}`        |
| `service.externalTrafficPolicy`    | service external traffic policy. Probably default should be "Cluster"      | `""`        |
| `service.loadBalancerSourceRanges` | service Load Balancer sources                                              | `[]`        |
| `service.loadBalancerIP`           | service Load Balancer IP                                                   | `""`        |
| `service.ports.http`               | service HTTP port                                                          | `80`        |
| `service.ports.https`              | service HTTPS port                                                         | `""`        |
| `service.nodePorts.http`           | Node port for HTTP                                                         | `""`        |
| `service.nodePorts.https`          | Node port for HTTPS                                                        | `""`        |
| `service.extraPorts`               | Extra ports to expose in service (normally used with the `sidecars` value) | `[]`        |

### serviceAccount parameters

| Name                         | Description                                                      | Value  |
| ---------------------------- | ---------------------------------------------------------------- | ------ |
| `serviceAccount.create`      | Specifies whether a ServiceAccount should be created             | `true` |
| `serviceAccount.name`        | The name of the ServiceAccount to use.                           | `""`   |
| `serviceAccount.annotations` | Additional Service Account annotations (evaluated as a template) | `{}`   |

### rbac parameters

| Name          | Description                                        | Value   |
| ------------- | -------------------------------------------------- | ------- |
| `rbac.create` | Specifies whether RBAC resources should be created | `false` |
| `rbac.rules`  | RBAC rules to set                                  | `[]`    |

### podSecurityPolicy parameters

| Name                        | Description                                                                                                                                                                                                 | Value   |
| --------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------- |
| `podSecurityPolicy.enabled` | Enable PodSecurityPolicy's RBAC rules. WARNING: PodSecurityPolicy is deprecated in Kubernetes v1.21 or later, unavailable in v1.25 or later https://kubernetes.io/docs/concepts/policy/pod-security-policy/ | `false` |
